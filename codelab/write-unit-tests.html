<!doctype html><html lang=en><head><meta charset=utf-8><title>Yeoman - Modern workflows for modern webapps</title><meta name=viewport content="width=device-width"><link href="http://fonts.googleapis.com/css?family=Droid+Sans:400,700|Lekton|Ubuntu+Mono:400,700" rel=stylesheet><link rel=stylesheet href=/yeoman.io/assets/css/main.273e.css><script src=/yeoman.io//ajax.googleapis.com/ajax/libs/jquery/2.1.0/jquery.min.js></script><script src=/yeoman.io/assets/js/scripts.9866.js></script></head><body class=""><style>body { background: white; }
img { max-width: 100%; }
img.spacer { margin: 0 auto; height: 250px; display: block; }
.mast-holder { width: 100%; text-align: center; }
.mast { margin: 0 auto; width: 350px; }
.note { background: #f2dede; padding: 15px; }
.social { margin: 0 auto; }
.authors { text-align: center; font-style: italic; }
ul, li {
  -webkit-margin-before: 0;
}
.codelab-paging {
  margin-top: 2em;
  text-align: center;
}
.codelab-paging a {
  margin: 0 1em;
  font-weight: bold;
}</style><nav><header><a href=/yeoman.io/index.html><img src=/yeoman.io/assets/img/yeoman-logo.a053.png></a></header><ul><li class=nav-divider><a href=/yeoman.io/index.html><img src=/yeoman.io/assets/img/icon-home.e05d.png>Home</a></li><li class=nav-divider><a href=/yeoman.io/whyyeoman.html><img src=/yeoman.io/assets/img/icon-why-yeoman.d00f.png>Why Yeoman?</a></li><li class=nav-divider><a href=/yeoman.io/gettingstarted.html><img src=/yeoman.io/assets/img/icon-getting-started.49a8.png>Getting Started</a></li><li class=nav-sub><a href=/yeoman.io/codelab.html>Codelab</a></li><li class=nav-sub><a href=/yeoman.io/videos.html>Videos</a></li><li class=nav-sub><a href=/yeoman.io/about.html>About</a></li><li class=nav-sub><a href=/yeoman.io/deployment.html>Deployment</a></li><li class=nav-sub><a href=/yeoman.io/support.html>Support</a></li><li class=nav-sub><a href=/yeoman.io/articles.html>Articles</a></li><li class=nav-divider><a href=/yeoman.io/blog>Blog</a></li><li class=nav-divider><a href=/yeoman.io/generators.html>Generators</a></li><li class=nav-sub><a href=/yeoman.io/official-generators.html>Official Generators</a></li><li class=nav-sub><a href=/yeoman.io/community-generators.html>Community Generators</a></li><li class=nav-sub><a href=/yeoman.io/generators.html#writing-your-first-generator>Write Your First Generator</a></li><li class=nav-sub><a href=/yeoman.io/generators.html#get-help>Get Help</a></li><li class=nav-sub><a href=/yeoman.io/generators.html#reference-materials>Reference Materials</a></li><li class=nav-sub><a href=/yeoman.io/generators.html#snippets>Snippets</a></li><li class=nav-sub><a href=/yeoman.io/generators.html#frequently-asked-questions>FAQ</a></li><li class=nav-divider><a href=https://github.com/yeoman/yeoman/wiki><img src=/yeoman.io/assets/img/icon-documentation.eec7.png>Documentation</a></li><li class=nav-divider><a href=/yeoman.io/faq.html><img src=/yeoman.io/assets/img/icon-faqs.9efe.png>FAQ</a></li><li class=nav-divider><a href=https://plus.google.com/101063139999404044459/posts><img src=/yeoman.io/assets/img/icon-google-plus.4a25.png>Google&#43;</a></li><li><a href=http://twitter.com/yeoman><img src=/yeoman.io/assets/img/icon-twitter.0fb3.png>Twitter</a></li><li><a href=http://github.com/yeoman/yeoman><img src=/yeoman.io/assets/img/icon-github.6fa5.png>GitHub</a></li><li><a href=/yeoman.io/blog/atom.xml type=application/atom+xml><img src=/yeoman.io/assets/img/icon-rss-feed.8868.png>Blog Feed</a></li><li class=nav-divider><a href=https://github.com/yeoman/yeoman/blob/master/contributing.md><img src=/yeoman.io/assets/img/icon-contributing.9ac9.png>Contributing</a></li></ul></nav><div id=content><article><div class=social><a href=https://twitter.com/share class=twitter-share-button data-url=http://yeoman.io/codelab.html data-text="Let's Scaffold A Web App With Yeoman!">Tweet</a><script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script><script src=https://apis.google.com/js/plusone.js></script><g:plus action=share></g:plus></div><h1>Test with Karma and Jasmine</h1><p>For those unfamiliar with <a href=http://karma-runner.github.io>Karma</a>, it is a JavaScript test runner that is test framework agnostic. The Angular generator has two included test frameworks: <a href=http://docs.angularjs.org/guide/dev_guide.e2e-testing>ngScenario</a> and <a href="http://pivotal.github.io/jasmine/">Jasmine</a>. When we ran <code>yo angular</code> earlier in this Codelab, the generator scaffolded a <code>test</code> directory in the root of the ‘mytodo’ folder, created a karma.conf file, and pulled in the Node modules for Karma. We’ll be editing a Jasmine script to describe our tests soon but let’s see how we can run tests first.</p><p>Let’s go back to the command-line and kill our grunt server using <code>Ctrl+C</code>. There is already a grunt task scaffolded out in our Gruntfile.js for running tests. It can be run as follows:</p><div class=highlight><pre><code class="js language-js" data-lang=js><span class=nx>$</span> <span class=nx>grunt</span> <span class=nx>test</span>
</code></pre></div><p>When you run <code>grunt test</code>, you will see a new browser window open and close, and some warnings in the Yeoman console. Don’t worry, that’s to be expected right now.</p><p>Our tests are currently failing as we haven’t updated the boilerplate test which still references awesomeThings. We also need to update the Karma configuration to load the the new Bower components into the browser. Open karma.conf.js and replace the &quot;files&quot; array with:</p><div class=highlight><pre><code class="js language-js" data-lang=js> <span class=nx>files</span><span class=o>:</span> <span class=p>[</span>
  <span class=s1>&#39;app/bower_components/jquery/jquery.js&#39;</span><span class=p>,</span>
  <span class=s1>&#39;app/bower_components/jquery-ui/ui/jquery-ui.js&#39;</span><span class=p>,</span>
  <span class=s1>&#39;app/bower_components/angular/angular.js&#39;</span><span class=p>,</span>
  <span class=s1>&#39;app/bower_components/angular-ui-sortable/sortable.js&#39;</span><span class=p>,</span>
  <span class=s1>&#39;app/bower_components/angular-mocks/angular-mocks.js&#39;</span><span class=p>,</span>
  <span class=s1>&#39;app/bower_components/angular-local-storage/angular-local-storage.js&#39;</span><span class=p>,</span>
  <span class=s1>&#39;app/scripts/*.js&#39;</span><span class=p>,</span>
  <span class=s1>&#39;app/scripts/**/*.js&#39;</span><span class=p>,</span>
  <span class=s1>&#39;test/mock/**/*.js&#39;</span><span class=p>,</span>
  <span class=s1>&#39;test/spec/**/*.js&#39;</span><span class=p>,</span>
  <span class=s1>&#39;app/bower_components/angular-resource/angular-resource.js&#39;</span><span class=p>,</span>
  <span class=s1>&#39;app/bower_components/angular-cookies/angular-cookies.js&#39;</span><span class=p>,</span>
  <span class=s1>&#39;app/bower_components/angular-sanitize/angular-sanitize.js&#39;</span><span class=p>,</span>
  <span class=s1>&#39;app/bower_components/angular-route/angular-route.js&#39;</span>
<span class=p>],</span>
</code></pre></div><!--
So remember that we previously changed app/scripts/controllers/main.js to load items from localStorage? To keep your head from exploding, let’s work with some static todo items to keep things simple for these unit tests.

Replace the contents of main.js with the following:

```js
'use strict';

angular.module('mytodoApp')
  .controller('MainCtrl', function ($scope) {

  $scope.todos = [];

  $scope.addTodo = function () {
    $scope.todos.push($scope.todo);
    $scope.todo = '';
  };

  $scope.removeTodo = function (index) {
    $scope.todos.splice(index, 1);
  };
});
```
--><p>Modify the unit test for your main.js. You’ll find the tests scaffolding out in the ‘test’ folder, so open up test/spec/controllers/main.js.</p><p>Delete the following:</p><div class=highlight><pre><code class="js language-js" data-lang=js><span class=nx>it</span><span class=p>(</span><span class=s1>&#39;should attach a list of awesomeThings to the scope&#39;</span><span class=p>,</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
  <span class=nx>expect</span><span class=p>(</span><span class=nx>scope</span><span class=p>.</span><span class=nx>awesomeThings</span><span class=p>.</span><span class=nx>length</span><span class=p>).</span><span class=nx>toBe</span><span class=p>(</span><span class=mi>3</span><span class=p>);</span>
<span class=p>});</span>
</code></pre></div><p>And replace that test with the following:</p><div class=highlight><pre><code class="js language-js" data-lang=js><span class=nx>it</span><span class=p>(</span><span class=s1>&#39;should have no items to start&#39;</span><span class=p>,</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
    <span class=nx>expect</span><span class=p>(</span><span class=nx>scope</span><span class=p>.</span><span class=nx>todos</span><span class=p>.</span><span class=nx>length</span><span class=p>).</span><span class=nx>toBe</span><span class=p>(</span><span class=mi>0</span><span class=p>);</span>
<span class=p>});</span>
</code></pre></div><p>Re-running our tests with <code>grunt test</code> should see our tests passing:</p><p><img src=/yeoman.io/assets/img/codelab/image_33.f1ee.png alt=""></p><p>Let’s add a couple of extra tests to test the adding and removing of items:</p><div class=highlight><pre><code class="js language-js" data-lang=js>  <span class=nx>it</span><span class=p>(</span><span class=s1>&#39;should add items to the list&#39;</span><span class=p>,</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
      <span class=nx>scope</span><span class=p>.</span><span class=nx>todo</span> <span class=o>=</span> <span class=s1>&#39;Test 1&#39;</span><span class=p>;</span>
      <span class=nx>scope</span><span class=p>.</span><span class=nx>addTodo</span><span class=p>();</span>
      <span class=nx>expect</span><span class=p>(</span><span class=nx>scope</span><span class=p>.</span><span class=nx>todos</span><span class=p>.</span><span class=nx>length</span><span class=p>).</span><span class=nx>toBe</span><span class=p>(</span><span class=mi>1</span><span class=p>);</span>
    <span class=p>});</span>

  <span class=nx>it</span><span class=p>(</span><span class=s1>&#39;should add items to the list&#39;</span><span class=p>,</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
      <span class=nx>scope</span><span class=p>.</span><span class=nx>todo</span> <span class=o>=</span> <span class=s1>&#39;Test 1&#39;</span><span class=p>;</span>
      <span class=nx>scope</span><span class=p>.</span><span class=nx>addTodo</span><span class=p>();</span>
      <span class=nx>scope</span><span class=p>.</span><span class=nx>removeTodo</span><span class=p>(</span><span class=mi>0</span><span class=p>);</span>
      <span class=nx>expect</span><span class=p>(</span><span class=nx>scope</span><span class=p>.</span><span class=nx>todos</span><span class=p>.</span><span class=nx>length</span><span class=p>).</span><span class=nx>toBe</span><span class=p>(</span><span class=mi>0</span><span class=p>);</span>
    <span class=p>});</span>
</code></pre></div><p>Your full MainCtrl test script (test/spec/controllers/main.js) should now look like this:</p><div class=highlight><pre><code class="js language-js" data-lang=js><span class=s1>&#39;use strict&#39;</span><span class=p>;</span>

<span class=nx>describe</span><span class=p>(</span><span class=s1>&#39;Controller: MainCtrl&#39;</span><span class=p>,</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>

  <span class=c1>// load the controller&#39;s module</span>
  <span class=nx>beforeEach</span><span class=p>(</span><span class=nx>module</span><span class=p>(</span><span class=s1>&#39;mytodoApp&#39;</span><span class=p>));</span>

  <span class=kd>var</span> <span class=nx>MainCtrl</span><span class=p>,</span>
    <span class=nx>scope</span><span class=p>;</span>

  <span class=c1>// Initialize the controller and a mock scope</span>
  <span class=nx>beforeEach</span><span class=p>(</span><span class=nx>inject</span><span class=p>(</span><span class=kd>function</span> <span class=p>(</span><span class=nx>$controller</span><span class=p>,</span> <span class=nx>$rootScope</span><span class=p>)</span> <span class=p>{</span>
    <span class=nx>scope</span> <span class=o>=</span> <span class=nx>$rootScope</span><span class=p>.</span><span class=nx>$new</span><span class=p>();</span>
    <span class=nx>MainCtrl</span> <span class=o>=</span> <span class=nx>$controller</span><span class=p>(</span><span class=s1>&#39;MainCtrl&#39;</span><span class=p>,</span> <span class=p>{</span>
      <span class=nx>$scope</span><span class=o>:</span> <span class=nx>scope</span>
    <span class=p>});</span>
  <span class=p>}));</span>

  <span class=nx>it</span><span class=p>(</span><span class=s1>&#39;should have no items to start&#39;</span><span class=p>,</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
    <span class=nx>expect</span><span class=p>(</span><span class=nx>scope</span><span class=p>.</span><span class=nx>todos</span><span class=p>.</span><span class=nx>length</span><span class=p>).</span><span class=nx>toBe</span><span class=p>(</span><span class=mi>0</span><span class=p>);</span>
  <span class=p>});</span>

  <span class=nx>it</span><span class=p>(</span><span class=s1>&#39;should add items to the list&#39;</span><span class=p>,</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
    <span class=nx>scope</span><span class=p>.</span><span class=nx>todo</span> <span class=o>=</span> <span class=s1>&#39;Test 1&#39;</span><span class=p>;</span>
    <span class=nx>scope</span><span class=p>.</span><span class=nx>addTodo</span><span class=p>();</span>
    <span class=nx>expect</span><span class=p>(</span><span class=nx>scope</span><span class=p>.</span><span class=nx>todos</span><span class=p>.</span><span class=nx>length</span><span class=p>).</span><span class=nx>toBe</span><span class=p>(</span><span class=mi>1</span><span class=p>);</span>
  <span class=p>});</span>

  <span class=nx>it</span><span class=p>(</span><span class=s1>&#39;should add items to the list&#39;</span><span class=p>,</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
    <span class=nx>scope</span><span class=p>.</span><span class=nx>todo</span> <span class=o>=</span> <span class=s1>&#39;Test 1&#39;</span><span class=p>;</span>
    <span class=nx>scope</span><span class=p>.</span><span class=nx>addTodo</span><span class=p>();</span>
    <span class=nx>scope</span><span class=p>.</span><span class=nx>removeTodo</span><span class=p>(</span><span class=mi>0</span><span class=p>);</span>
    <span class=nx>expect</span><span class=p>(</span><span class=nx>scope</span><span class=p>.</span><span class=nx>todos</span><span class=p>.</span><span class=nx>length</span><span class=p>).</span><span class=nx>toBe</span><span class=p>(</span><span class=mi>0</span><span class=p>);</span>
  <span class=p>});</span>

<span class=p>});</span>
</code></pre></div><p>Running the tests again, we should see everything pass with 3 tests being executed:</p><p><img src=/yeoman.io/assets/img/codelab/image_34.2ccb.png alt=""></p><p>Fantastic!</p><p>Writing unit tests make it easier to catch bugs as your app gets bigger and when more developers join your team. The scaffolding feature of Yeoman makes writing unit tests easier so no excuse for not writing your own tests! ;)</p><p class=codelab-paging><a href=../codelab.html#toc>&laquo; Return to overview</a> or <a href=local-storage.html>Go to the next step &raquo;</a></p></article></div><script>// $script.js - github.com/ded/script.js
  (function(a,b,c){typeof c["module"]!="undefined"&&c.module.exports?c.module.exports=b():typeof c["define"]!="undefined"&&c["define"]=="function"&&c.define.amd?define(a,b):c[a]=b()})("$script",function(){function p(a,b){for(var c=0,d=a.length;c<d;++c)if(!b(a[c]))return j;return 1}function q(a,b){p(a,function(a){return!b(a)})}function r(a,b,i){function o(a){return a.call?a():d[a]}function t(){if(!--n){d[m]=1,l&&l();for(var a in f)p(a.split("|"),o)&&!q(f[a],o)&&(f[a]=[])}}a=a[k]?a:[a];var j=b&&b.call,l=j?b:i,m=j?a.join(""):b,n=a.length;return setTimeout(function(){q(a,function(a){if(h[a])return m&&(e[m]=1),h[a]==2&&t();h[a]=1,m&&(e[m]=1),s(!c.test(a)&&g?g+a+".js":a,t)})},0),r}function s(c,d){var e=a.createElement("script"),f=j;e.onload=e.onerror=e[o]=function(){if(e[m]&&!/^c|loade/.test(e[m])||f)return;e.onload=e[o]=null,f=1,h[c]=2,d()},e.async=1,e.src=c,b.insertBefore(e,b.firstChild)}var a=document,b=a.getElementsByTagName("head")[0],c=/^https?:\/\//,d={},e={},f={},g,h={},i="string",j=!1,k="push",l="DOMContentLoaded",m="readyState",n="addEventListener",o="onreadystatechange";return!a[m]&&a[n]&&(a[n](l,function t(){a.removeEventListener(l,t,j),a[m]="complete"},j),a[m]="loading"),r.get=s,r.order=function(a,b,c){(function d(e){e=a.shift(),a.length?r(e,d):r(e,b,c)})()},r.path=function(a){g=a},r.ready=function(a,b,c){a=a[k]?a:[a];var e=[];return!q(a,function(a){d[a]||e[k](a)})&&p(a,function(a){return d[a]})?b():!function(a){f[a]=f[a]||[],f[a][k](b),c&&c(e)}(a.join("|")),r},r},this)
  var _gaq=[
    ['_setAccount','UA-32956520-1'],
    ['_setDomainName', '.yeoman.io'],
    ['_trackPageview'],['_trackPageLoadTime']
  ];
  $script('http://www.google-analytics.com/ga.js');
  $script('https://apis.google.com/js/plusone.js');
  $script("//platform.twitter.com/widgets.js");</script></body></html>